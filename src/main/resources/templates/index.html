<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:inline="javascript">
  <head>
    <meta charset="UTF-8" />
    <title>光影之門首頁</title>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />

    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <link href="/css/sb-admin-2.min.css" rel="stylesheet" />
    <!-- 你的自定義樣式 -->
    <link rel="stylesheet" href="/css/index2.css" />
    <link rel="stylesheet" href="/css/footer.css" />

    <style>
      body {
        padding-top: 80px;
        /* 避開 fixed-top navbar */
      }

      .navbar .nav-link {
        font-size: 16px;
        font-weight: 600;
      }
    </style>
  </head>

  <body th:data-loggedin="${session.memberDetail != null}">
    <!-- 載入 Bootstrap navbar fragment -->
    <th:block th:replace="~{fragments/navbar :: navbar}"></th:block>
    <!-- 主內容區與 footer 保留不變 -->
    <div class="container">
      <!-- Showcase -->
      <!-- 公告圖片輪播區 -->
      <div
        id="adCarousel"
        class="carousel slide"
        data-bs-ride="carousel"
        data-bs-interval="3000"
      >
        <div class="carousel-inner" id="carouselContent">
          <!-- 這裡的內容會用 JS 動態產生 -->
        </div>

        <!-- 輪播控制按鈕 -->
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#adCarousel"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#adCarousel"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>

	  <!-- 最新上映 -->
	    <h2 class="text-left mb-4">最新上映</h2>
	  <section class="home-cards" id="latest-movies">
	  </section>

	  <!-- 即將上映 -->
	    <h2 class="text-left mb-4">即將上映</h2>
	  <section class="home-cards mt-5" id="upcoming-movies">
      </section>

      <!-- 關於電影院 -->
      <section class="carbon dark">
        <div class="content">
          <h2>光影之門電影院</h2>
          <p>
            光影之門電影院，創立於 2001
            年，致力於打造沉浸式觀影體驗，讓光影交織夢想，為每一位觀眾呈現極致視聽盛宴。
          </p>
          <a href="#" class="btn"
            >了解我們 <i class="fas fa-chevron-right"></i
          ></a>
        </div>
      </section>

      <!-- 社群連結 -->
      <section class="follow">
        <p>Follow Us</p>
        <a href="https://facebook.com"
          ><img src="/imgs/social-fb.png" alt="Facebook"
        /></a>
        <a href="https://twitter.com"
          ><img src="/imgs/social-twitter.png" alt="Twitter"
        /></a>
        <a href="https://linkedin.com"
          ><img src="/imgs/social-linkedin.png" alt="Linkedin"
        /></a>
      </section>

      <div th:if="${session.memberName != null}">
        <div
          class="modal fade"
          id="chatModal"
          tabindex="-1"
          aria-labelledby="chatModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">即時客服對話</h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <div class="modal-body">
                <div
                  id="chat-box"
                  style="
                    height: 200px;
                    overflow-y: auto;
                    border: 1px solid #ccc;
                    padding: 10px;
                  "
                ></div>

                <input
                  id="from"
                  class="form-control mt-2"
                  readonly
                  th:value="${session.memberName}"
                />
                <input
                  id="message"
                  class="form-control mt-2"
                  placeholder="輸入訊息"
                />
                <button onclick="sendMessage()" class="btn btn-primary mt-2">
                  送出
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <th:block th:replace="~{fragments/loginPage :: login}"></th:block>

    <!-- 載入 footer fragment -->

    <!-- 載入 footer fragment -->
    <th:block th:replace="~{fragments/footer :: footer}"></th:block>

    <!-- Bootstrap JS -->
    
    
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap core JavaScript-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Custom scripts for all pages-->
    <script src="/js/sb-admin-2.min.js"></script>
    <!-- 其他 script -->
    <script th:if="${logoutSuccess}">
      Swal.fire({
        icon: "success",
        title: "登出成功",
        text: "您已成功登出！",
        confirmButtonText: "確認",
        timer: 3000,
        timerProgressBar: true,
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <script src="/js/loginPage.js"></script>
	<script src="/js/movielatest.js"></script>
	<script src="/js/moviesoon.js"></script>
    <script src="/js/carousel.js"></script>
    <script src="/js/chat.js"></script>
  </body>
</html>
