<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:inline="javascript">

<head>
<meta charset="UTF-8" />
<title>光影之門首頁</title>

<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />

<!-- FontAwesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
<link href="/css/sb-admin-2.min.css" rel="stylesheet" />
<!-- 你的自定義樣式 -->
<link rel="stylesheet" href="/css/index2.css" />
<link rel="stylesheet" href="/css/footer.css" />

<style>
body {
	padding-top: 80px;
	/* 避開 fixed-top navbar */
}

.navbar .nav-link {
	font-size: 16px;
	font-weight: 600;
}
</style>
</head>

<body>
	<!-- 載入 Bootstrap navbar fragment -->
	<th:block th:replace="~{fragments/navbar :: navbar}"></th:block>
	<!-- 主內容區與 footer 保留不變 -->
	<div class="container">
		<!-- Showcase -->
		<!-- 公告圖片輪播區 -->
		<div id="adCarousel" class="carousel slide" data-bs-ride="carousel"
			data-bs-interval="3000">
			<div class="carousel-inner" id="carouselContent">
				<!-- 這裡的內容會用 JS 動態產生 -->
			</div>

			<!-- 輪播控制按鈕 -->
			<button class="carousel-control-prev" type="button"
				data-bs-target="#adCarousel" data-bs-slide="prev">
				<span class="carousel-control-prev-icon"></span>
			</button>
			<button class="carousel-control-next" type="button"
				data-bs-target="#adCarousel" data-bs-slide="next">
				<span class="carousel-control-next-icon"></span>
			</button>
		</div>

		<!-- 電影卡片 -->
		<section class="home-cards">
			<div>
				<img src="/imgs/bear2.jpg" alt="" />
				<h3>《柏靈頓：熊熊去祕魯》</h3>
				<p>熊熊出發，揭開祕魯的驚奇冒險！</p>
				<a th:href="@{/orderset}">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
			<div>
				<img src="/imgs/DeadPool.png" alt="" />
				<h3>《死侍與金鋼狼》</h3>
				<p>嘴炮 vs. 狼爪，史上最爆笑亂鬥登場！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
			<div>
				<img src="/imgs/InsideOut2.jpeg" alt="" />
				<h3>《腦筋急轉彎2》</h3>
				<p>你的腦內總部，迎來全新情緒風暴！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
			<div>
				<img src="/imgs/Joker2.jpg" alt="" />
				<h3>《小丑2》</h3>
				<p>瘋狂不再孤單，笑聲背後的黑暗更深邃！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
		</section>


		<!-- 餐點卡片 -->
		<section class="home-cards">
			<div>
				<img src="/imgs/CinemaParadise.jpg" alt="" />
				<h3>《新天堂樂園》</h3>
				<p>光影交織的夢想，映照不朽的回憶！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
			<div>
				<img src="/imgs/Avengers.jpg" alt="" />
				<h3>《復仇者聯盟：無限之戰》</h3>
				<p>宇宙命運懸於一指，英雄殊死一戰！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
			<div>
				<img src="/imgs/玩命關頭8.jpg" alt="" />
				<h3>《玩命關頭8》</h3>
				<p>家人、背叛、極速對決，熱血永不熄滅！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
			<div>
				<img src="/imgs/蠟筆小新.jpg" alt="" />
				<h3>《蠟筆小新：我們的恐龍日記》</h3>
				<p>小新VS恐龍，爆笑大冒險開啟！</p>
				<a href="#">前往訂票<i class="fas fa-chevron-right"></i></a>
			</div>
		</section>

		<!-- 關於電影院 -->
		<section class="carbon dark">
			<div class="content">
				<h2>光影之門電影院</h2>
				<p>光影之門電影院，創立於 2001 年，致力於打造沉浸式觀影體驗，讓光影交織夢想，為每一位觀眾呈現極致視聽盛宴。</p>
				<a href="#" class="btn">了解我們 <i class="fas fa-chevron-right"></i></a>
			</div>
		</section>

		<!-- 社群連結 -->
		<section class="follow">
			<p>Follow Us</p>
			<a href="https://facebook.com"><img src="/imgs/social-fb.png"
				alt="Facebook" /></a> <a href="https://twitter.com"><img
				src="/imgs/social-twitter.png" alt="Twitter" /></a> <a
				href="https://linkedin.com"><img src="/imgs/social-linkedin.png"
				alt="Linkedin" /></a>
		</section>

		<div th:if="${session.memberName != null}">
			<div class="modal fade" id="chatModal" tabindex="-1"
				aria-labelledby="chatModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">即時客服對話</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
						</div>
						<div class="modal-body">
							<div id="chat-box"
								style="height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"></div>

							<input id="from" class="form-control mt-2" readonly
								th:value="${session.memberName}" /> <input id="message"
								class="form-control mt-2" placeholder="輸入訊息" />
							<button onclick="sendMessage()" class="btn btn-primary mt-2">
								送出</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<th:block th:replace="~{fragments/loginPage :: login}"></th:block>

	<!-- 載入 footer fragment -->

	<!-- 載入 footer fragment -->
	<th:block th:replace="~{fragments/footer :: footer}"></th:block>

	<!-- Bootstrap JS -->
	<script src="/js/jquery.js"></script>
	<script src="/js/bootstrap.bundle.min.js"></script>
	<!-- Bootstrap core JavaScript-->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<!-- Custom scripts for all pages-->
	<script src="/js/sb-admin-2.min.js"></script>
	<!-- 其他 script -->
	<script th:if="${logoutSuccess}">
    Swal.fire({
      icon: 'success',
      title: '登出成功',
      text: '您已成功登出！',
      confirmButtonText: '確認',
      timer: 3000,
      timerProgressBar: true
    });
  </script>
<<<<<<< HEAD
	<script th:inline="javascript">
    const isLoggedIn = [[${ session.memberDetail != null }]];
    const modalEl = document.getElementById('loginModal');
    const loginModal = new bootstrap.Modal(modalEl);

    $(document).ready(function () {
      if (localStorage.getItem("autoShowLogin") === "true") {
        loginModal.show();
        localStorage.removeItem("autoShowLogin");
      }

      $(".memberLink").on("click", function (e) {
        if (!isLoggedIn) {
          e.preventDefault();
          Swal.fire({
            title: "尚未登入",
            text: "請先登入會員",
            icon: "warning",
            confirmButtonText: "前往登入"
          }).then(() => {
            loginModal.show();
          });
        }
      });
    });
  </script>
	<script>
    $(document).ready(function () {
      $('.login-form').submit(function (e) {
        e.preventDefault();
        $.ajax({
          url: '/member/login',
          type: 'POST',
          data: $('.login-form').serialize(), // 修正這裡
          success: function (response) {
            if (response.status === 'success') {
              Swal.fire({
                icon: 'success',
                title: '登入成功',
                html: `歡迎 <b>${response.name}</b>！`,
                confirmButtonText: '前往首頁'
              }).then(() => {
                window.location.href = '/';
              });
            } else {
              Swal.fire({
                icon: 'error',
                title: '登入失敗',
                text: response.message || '請稍後再試'
              });
            }
          },
          error: function (xhr) {
            Swal.fire({
              icon: 'error',
              title: '伺服器錯誤',
              text: '請稍後再試或聯絡客服'
            });
          }
        });
      });
    });
  </script>
=======
  
  <script th:inline="javascript"> 
    window.sessionIsLoggedIn = [[${session.memberDetail != null}]];  
  </script>
  <script src="/js/loginPage.js"></script>
>>>>>>> origin/New-Eric-Member
</body>

</html>